<!DOCTYPE html>
<html>
<head>
  <title>Student Registration</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Student Registration</h1>
      <p>Sign up to continue</p>

      <form id="registrationForm">
        <input type="text" name="email_Phone" placeholder="Email or Phone Number" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit">Register</button>
      </form>

      <p id="msg"></p>
    </div>
  </div>

<script>
  const form = document.getElementById("registrationForm");
  const msg = document.getElementById("msg");

  // ðŸ”¹ Replace with your Web App URL (Apps Script deployment)
  const url = "https://script.google.com/macros/s/AKfycbwLKJxmB4LDUpldRIPe3ZInmr2KoRN9oLYyFaE60gKsdk5lhoSxQeULjnrk0pgEy8S0Mw/exec";

  form.addEventListener("submit", function(e) {
    e.preventDefault();

    msg.innerText = "Submitting...";
    msg.style.color = "black";

    // Send form data to Google Apps Script
    fetch(url, {
      method: "POST",
      body: new FormData(form)
    })
    .then(res => res.text())
    .then(text => {
      console.log("RAW RESPONSE:", text);

      let data;
      try {
        data = JSON.parse(text);
      } catch(err) {
        throw new Error("Invalid JSON response from server");
      }

      if (data.result === "success") {
        msg.innerText = "Registration successful!";
        msg.style.color = "green";
        form.reset();
      } else {
        msg.innerText = "Submission failed: " + (data.message || "");
        msg.style.color = "red";
      }
    })
    .catch(err => {
      console.error("Error:", err);
      msg.innerText = "Submission failed!";
      msg.style.color = "red";
    });
  });
</script>

</body>
</html>
