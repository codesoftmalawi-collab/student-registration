<!DOCTYPE html>
<html>
<head>
  <title>Student Registration</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <h2>Registration</h2>
      <p>Student Registration</p>

      <form id="registrationForm">
        <!-- Email or Phone -->
        <input
          type="text"
          name="email_Phone"
          placeholder="Email or Phone Number"
          required
        >

        <!-- Password -->
        <input
          type="password"
          name="password"
          placeholder="Password"
          required
        >

        <button type="submit">Register</button>
      </form>

      <p id="msg"></p>
    </div>
  </div>

 <script>
  const form = document.getElementById("registrationForm");
  const msg = document.getElementById("msg");

  const url = "https://script.google.com/macros/s/AKfycbxDGWi2AozTqjnZiQ3L5XK-_l2NK6QvVoSankIi30d7LcNoRrYM3-wRO0ryVbIaLeqDgg/exec";

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    msg.innerText = "Submitting...";
    msg.style.color = "black";

    fetch(url, {
      method: "POST",
      body: new FormData(form)
    })
    .then(res => res.text()) // ðŸ‘ˆ IMPORTANT
    .then(text => {
      console.log("RAW RESPONSE:", text);

      const data = JSON.parse(text); // ðŸ‘ˆ parse manually

      if (data.result === "success") {
        msg.innerText = "Registration successful!";
        msg.style.color = "green";
        form.reset();
      } else {
        msg.innerText = "Submission failed!";
        msg.style.color = "red";
      }
    })
    .catch(err => {
      console.error("Parse / Network error:", err);
      msg.innerText = "Submission failed!";
      msg.style.color = "red";
    });
  });
</script>


</body>
</html>
